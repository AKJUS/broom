<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Tidying methods for seasonal decompositions — decompose_tidiers • broom</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="../tidyverse.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- tidyverse -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a class="navbar-brand" href="../index.html">broom</a>
        <small class="tidyverse">part of the <a href="http://tidyverse.org">tidyverse</a></small>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="../articles/broom.html">Intro</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/bootstrapping.html">Bootstrapping</a>
    </li>
    <li>
      <a href="../articles/broom_and_dplyr.html">Broom and dplyr</a>
    </li>
    <li>
      <a href="../articles/kmeans.html">K-means</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
        <li>
  <a href="https://github.com/tidyverse/broom">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Tidying methods for seasonal decompositions</h1>
    </div>

    
    <p>These tidiers provide an <code>augment</code> method for the results of a seasonal
decomposition with <code><a href='http://www.rdocumentation.org/packages/stats/topics/decompose'>decompose</a></code> or
<code><a href='http://www.rdocumentation.org/packages/stats/topics/stl'>stl</a></code>.</p>
    

    <pre class="usage"><span class='co'># S3 method for decomposed.ts</span>
<span class='fu'><a href='augment.html'>augment</a></span>(<span class='no'>x</span>, <span class='no'>...</span>)

<span class='co'># S3 method for stl</span>
<span class='fu'><a href='augment.html'>augment</a></span>(<span class='no'>x</span>, <span class='kw'>weights</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>An object of class <code>"stl"</code> or <code>"decomposed.ts"</code>,
resulting from a call to <code><a href='http://www.rdocumentation.org/packages/stats/topics/decompose'>decompose</a></code> or
<code><a href='http://www.rdocumentation.org/packages/stats/topics/stl'>stl</a></code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Extra arguments. Unused.</p></td>
    </tr>
    <tr>
      <th>weights</th>
      <td><p>Whether to include the robust weights in the output.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The <code>augment</code> method returns a tidy data frame with the following
columns:</p><dl class='dl-horizontal'>
  <dt><code>.seasonal</code></dt><dd><p>The seasonal component of the decomposition.</p></dd>
  <dt><code>.trend</code></dt><dd><p>The trend component of the decomposition.</p></dd>
  <dt><code>.remainder</code></dt><dd><p>The remainder, or "random" component of the
  decomposition.</p></dd>
  <dt><code>.weight</code></dt><dd><p>The final robust weights (<code>stl</code> only).</p></dd>
  <dt><code>.seasadj</code></dt><dd><p>The seasonally adjusted (or "deseasonalised")
  series.</p></dd>
</dl>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The <code>augment</code> method returns the computed seasonal and trend components,
as well as the "remainder" term and the seasonally adjusted (or
"deseasonalised") series.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <p><code><a href='http://www.rdocumentation.org/packages/stats/topics/decompose'>decompose</a></code>, <code><a href='http://www.rdocumentation.org/packages/stats/topics/stl'>stl</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Time series of temperatures in Nottingham, 1920-1939:</span>
<span class='no'>nottem</span></div><div class='output co'>#&gt;       Jan  Feb  Mar  Apr  May  Jun  Jul  Aug  Sep  Oct  Nov  Dec
#&gt; 1920 40.6 40.8 44.4 46.7 54.1 58.5 57.7 56.4 54.3 50.5 42.9 39.8
#&gt; 1921 44.2 39.8 45.1 47.0 54.1 58.7 66.3 59.9 57.0 54.2 39.7 42.8
#&gt; 1922 37.5 38.7 39.5 42.1 55.7 57.8 56.8 54.3 54.3 47.1 41.8 41.7
#&gt; 1923 41.8 40.1 42.9 45.8 49.2 52.7 64.2 59.6 54.4 49.2 36.3 37.6
#&gt; 1924 39.3 37.5 38.3 45.5 53.2 57.7 60.8 58.2 56.4 49.8 44.4 43.6
#&gt; 1925 40.0 40.5 40.8 45.1 53.8 59.4 63.5 61.0 53.0 50.0 38.1 36.3
#&gt; 1926 39.2 43.4 43.4 48.9 50.6 56.8 62.5 62.0 57.5 46.7 41.6 39.8
#&gt; 1927 39.4 38.5 45.3 47.1 51.7 55.0 60.4 60.5 54.7 50.3 42.3 35.2
#&gt; 1928 40.8 41.1 42.8 47.3 50.9 56.4 62.2 60.5 55.4 50.2 43.0 37.3
#&gt; 1929 34.8 31.3 41.0 43.9 53.1 56.9 62.5 60.3 59.8 49.2 42.9 41.9
#&gt; 1930 41.6 37.1 41.2 46.9 51.2 60.4 60.1 61.6 57.0 50.9 43.0 38.8
#&gt; 1931 37.1 38.4 38.4 46.5 53.5 58.4 60.6 58.2 53.8 46.6 45.5 40.6
#&gt; 1932 42.4 38.4 40.3 44.6 50.9 57.0 62.1 63.5 56.3 47.3 43.6 41.8
#&gt; 1933 36.2 39.3 44.5 48.7 54.2 60.8 65.5 64.9 60.1 50.2 42.1 35.8
#&gt; 1934 39.4 38.2 40.4 46.9 53.4 59.6 66.5 60.4 59.2 51.2 42.8 45.8
#&gt; 1935 40.0 42.6 43.5 47.1 50.0 60.5 64.6 64.0 56.8 48.6 44.2 36.4
#&gt; 1936 37.3 35.0 44.0 43.9 52.7 58.6 60.0 61.1 58.1 49.6 41.6 41.3
#&gt; 1937 40.8 41.0 38.4 47.4 54.1 58.6 61.4 61.8 56.3 50.9 41.4 37.1
#&gt; 1938 42.1 41.2 47.3 46.6 52.4 59.0 59.6 60.4 57.0 50.7 47.8 39.2
#&gt; 1939 39.4 40.9 42.4 47.8 52.4 58.0 60.7 61.8 58.2 46.7 46.6 37.8</div><div class='input'>
<span class='co'># Perform seasonal decomposition on the data with both decompose</span>
<span class='co'># and stl:</span>
<span class='no'>d1</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/decompose'>decompose</a></span>(<span class='no'>nottem</span>)
<span class='no'>d2</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>stats</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stats/topics/stl'>stl</a></span>(<span class='no'>nottem</span>, <span class='kw'>s.window</span> <span class='kw'>=</span> <span class='st'>"periodic"</span>, <span class='kw'>robust</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Compare the original series to its decompositions.</span>

<span class='fu'>cbind</span>(<span class='kw pkg'>broom</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/broom/topics/tidy'>tidy</a></span>(<span class='no'>nottem</span>), <span class='kw pkg'>broom</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/broom/topics/augment'>augment</a></span>(<span class='no'>d1</span>),
      <span class='kw pkg'>broom</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/broom/topics/augment'>augment</a></span>(<span class='no'>d2</span>))</div><div class='output co'>#&gt;        x  .seasonal   .trend   .remainder .seasadj  .seasonal   .trend
#&gt; 1   40.6 -9.3393640       NA           NA 49.93936 -9.3419811 50.01420
#&gt; 2   40.8 -9.8998904       NA           NA 50.69989 -9.5256227 49.92165
#&gt; 3   44.4 -6.9466009       NA           NA 51.34660 -7.0008077 49.82909
#&gt; 4   46.7 -2.7573465       NA           NA 49.45735 -2.8175429 49.76684
#&gt; 5   54.1  3.4533991       NA           NA 50.64660  3.3639836 49.70459
#&gt; 6   58.5  8.9865132       NA           NA 49.51349  9.0952310 49.66925
#&gt; 7   57.7 12.9672149 49.04167 -4.308881579 44.73279 12.8624908 49.63390
#&gt; 8   56.4 11.4591009 49.15000 -4.209100877 44.94090 11.7116742 49.59154
#&gt; 9   54.3  7.4001096 49.13750 -2.237609649 46.89989  7.4288506 49.54917
#&gt; 10  50.5  0.6547149 49.17917  0.666118421 49.84529  0.3474728 49.53142
#&gt; 11  42.9 -6.6176535 49.19167  0.325986842 49.51765 -6.5449727 49.51367
#&gt; 12  39.8 -9.3601974 49.20000 -0.039802632 49.16020 -9.5787757 49.67527
#&gt; 13  44.2 -9.3393640 49.56667  3.972697368 53.53936 -9.3419811 49.83686
#&gt; 14  39.8 -9.8998904 50.07083 -0.370942982 49.69989 -9.5256227 50.01995
#&gt; 15  45.1 -6.9466009 50.32917  1.717434211 52.04660 -7.0008077 50.20304
#&gt; 16  47.0 -2.7573465 50.59583 -0.838486842 49.75735 -2.8175429 50.21930
#&gt; 17  54.1  3.4533991 50.61667  0.029934211 50.64660  3.3639836 50.23556
#&gt; 18  58.7  8.9865132 50.60833 -0.894846491 49.71349  9.0952310 50.08369
#&gt; 19  66.3 12.9672149 50.45417  2.878618421 53.33279 12.8624908 49.93182
#&gt; 20  59.9 11.4591009 50.12917 -1.688267544 48.44090 11.7116742 49.64468
#&gt; 21  57.0  7.4001096 49.85000 -0.250109649 49.59989  7.4288506 49.35754
#&gt; 22  54.2  0.6547149 49.41250  4.132785088 53.54529  0.3474728 49.04307
#&gt; 23  39.7 -6.6176535 49.27500 -2.957346491 46.31765 -6.5449727 48.72860
#&gt; 24  42.8 -9.3601974 49.30417  2.856030702 52.16020 -9.5787757 48.41063
#&gt; 25  37.5 -9.3393640 48.87083 -2.031469298 46.83936 -9.3419811 48.09265
#&gt; 26  38.7 -9.8998904 48.24167  0.358223684 48.59989 -9.5256227 47.78527
#&gt; 27  39.5 -6.9466009 47.89583 -1.449232456 46.44660 -7.0008077 47.47789
#&gt; 28  42.1 -2.7573465 47.48750 -2.630153509 44.85735 -2.8175429 47.32123
#&gt; 29  55.7  3.4533991 47.27917  4.967434211 52.24660  3.3639836 47.16456
#&gt; 30  57.8  8.9865132 47.32083  1.492653509 48.81349  9.0952310 47.25341
#&gt; 31  56.8 12.9672149 47.45417 -3.621381579 43.83279 12.8624908 47.34226
#&gt; 32  54.3 11.4591009 47.69167 -4.850767544 42.84090 11.7116742 47.54890
#&gt; 33  54.3  7.4001096 47.89167 -0.991776316 46.89989  7.4288506 47.75555
#&gt; 34  47.1  0.6547149 48.18750 -1.742214912 46.44529  0.3474728 47.94715
#&gt; 35  41.8 -6.6176535 48.07083  0.346820175 48.41765 -6.5449727 48.13874
#&gt; 36  41.7 -9.3601974 47.58750  3.472697368 51.06020 -9.5787757 48.29300
#&gt; 37  41.8 -9.3393640 47.68333  3.456030702 51.13936 -9.3419811 48.44726
#&gt; 38  40.1 -9.8998904 48.21250  1.787390351 49.99989 -9.5256227 48.54072
#&gt; 39  42.9 -6.9466009 48.43750  1.409100877 49.84660 -7.0008077 48.63417
#&gt; 40  45.8 -2.7573465 48.52917  0.028179825 48.55735 -2.8175429 48.56948
#&gt; 41  49.2  3.4533991 48.38750 -2.640899123 45.74660  3.3639836 48.50478
#&gt; 42  52.7  8.9865132 47.98750 -4.274013158 43.71349  9.0952310 48.29876
#&gt; 43  64.2 12.9672149 47.71250  3.520285088 51.23279 12.8624908 48.09274
#&gt; 44  59.6 11.4591009 47.50000  0.640899123 48.14090 11.7116742 47.88957
#&gt; 45  54.4  7.4001096 47.20000 -0.200109649 46.99989  7.4288506 47.68640
#&gt; 46  49.2  0.6547149 46.99583  1.549451754 48.54529  0.3474728 47.63720
#&gt; 47  36.3 -6.6176535 47.15000 -4.232346491 42.91765 -6.5449727 47.58800
#&gt; 48  37.6 -9.3601974 47.52500 -0.564802632 46.96020 -9.5787757 47.62960
#&gt; 49  39.3 -9.3393640 47.59167  1.047697368 48.63936 -9.3419811 47.67120
#&gt; 50  37.5 -9.8998904 47.39167  0.008223684 47.39989 -9.5256227 47.71188
#&gt; 51  38.3 -6.9466009 47.41667 -2.170065789 45.24660 -7.0008077 47.75257
#&gt; 52  45.5 -2.7573465 47.52500  0.732346491 48.25735 -2.8175429 47.91295
#&gt; 53  53.2  3.4533991 47.88750  1.859100877 49.74660  3.3639836 48.07333
#&gt; 54  57.7  8.9865132 48.47500  0.238486842 48.71349  9.0952310 48.34262
#&gt; 55  60.8 12.9672149 48.75417 -0.921381579 47.83279 12.8624908 48.61192
#&gt; 56  58.2 11.4591009 48.90833 -2.167434211 46.74090 11.7116742 48.81156
#&gt; 57  56.4  7.4001096 49.13750 -0.137609649 48.99989  7.4288506 49.01119
#&gt; 58  49.8  0.6547149 49.22500 -0.079714912 49.14529  0.3474728 49.12549
#&gt; 59  44.4 -6.6176535 49.23333  1.784320175 51.01765 -6.5449727 49.23979
#&gt; 60  43.6 -9.3601974 49.32917  3.631030702 52.96020 -9.5787757 49.35392
#&gt; 61  40.0 -9.3393640 49.51250 -0.173135965 49.33936 -9.3419811 49.46805
#&gt; 62  40.5 -9.8998904 49.74167  0.658223684 50.39989 -9.5256227 49.52972
#&gt; 63  40.8 -6.9466009 49.71667 -1.970065789 47.74660 -7.0008077 49.59138
#&gt; 64  45.1 -2.7573465 49.58333 -1.725986842 47.85735 -2.8175429 49.45273
#&gt; 65  53.8  3.4533991 49.32917  1.017434211 50.34660  3.3639836 49.31407
#&gt; 66  59.4  8.9865132 48.76250  1.650986842 50.41349  9.0952310 49.10862
#&gt; 67  63.5 12.9672149 48.42500  2.107785088 50.53279 12.8624908 48.90317
#&gt; 68  61.0 11.4591009 48.51250  1.028399123 49.54090 11.7116742 48.89233
#&gt; 69  53.0  7.4001096 48.74167 -3.141776316 45.59989  7.4288506 48.88149
#&gt; 70  50.0  0.6547149 49.00833  0.336951754 49.34529  0.3474728 48.91397
#&gt; 71  38.1 -6.6176535 49.03333 -4.315679825 44.71765 -6.5449727 48.94645
#&gt; 72  36.3 -9.3601974 48.79167 -3.131469298 45.66020 -9.5787757 48.90282
#&gt; 73  39.2 -9.3393640 48.64167 -0.102302632 48.53936 -9.3419811 48.85919
#&gt; 74  43.4 -9.8998904 48.64167  4.658223684 53.29989 -9.5256227 48.89413
#&gt; 75  43.4 -6.9466009 48.87083  1.475767544 50.34660 -7.0008077 48.92906
#&gt; 76  48.9 -2.7573465 48.92083  2.736513158 51.65735 -2.8175429 49.03010
#&gt; 77  50.6  3.4533991 48.92917 -1.782565789 47.14660  3.3639836 49.13114
#&gt; 78  56.8  8.9865132 49.22083 -1.407346491 47.81349  9.0952310 49.14031
#&gt; 79  62.5 12.9672149 49.37500  0.157785088 49.53279 12.8624908 49.14949
#&gt; 80  62.0 11.4591009 49.17917  1.361732456 50.54090 11.7116742 49.07881
#&gt; 81  57.5  7.4001096 49.05417  1.045723684 50.09989  7.4288506 49.00814
#&gt; 82  46.7  0.6547149 49.05833 -3.013048246 46.04529  0.3474728 48.97150
#&gt; 83  41.6 -6.6176535 49.02917 -0.811513158 48.21765 -6.5449727 48.93486
#&gt; 84  39.8 -9.3601974 49.00000  0.160197368 49.16020 -9.5787757 48.86818
#&gt; 85  39.4 -9.3393640 48.83750 -0.098135965 48.73936 -9.3419811 48.80149
#&gt; 86  38.5 -9.8998904 48.68750 -0.287609649 48.39989 -9.5256227 48.70096
#&gt; 87  45.3 -6.9466009 48.50833  3.738267544 52.24660 -7.0008077 48.60042
#&gt; 88  47.1 -2.7573465 48.54167  1.315679825 49.85735 -2.8175429 48.56807
#&gt; 89  51.7  3.4533991 48.72083 -0.474232456 48.24660  3.3639836 48.53571
#&gt; 90  55.0  8.9865132 48.55833 -2.544846491 46.01349  9.0952310 48.52398
#&gt; 91  60.4 12.9672149 48.42500 -0.992214912 47.43279 12.8624908 48.51226
#&gt; 92  60.5 11.4591009 48.59167  0.449232456 49.04090 11.7116742 48.54413
#&gt; 93  54.7  7.4001096 48.59583 -1.295942982 47.29989  7.4288506 48.57601
#&gt; 94  50.3  0.6547149 48.50000  1.145285088 49.64529  0.3474728 48.64185
#&gt; 95  42.3 -6.6176535 48.47500  0.442653509 48.91765 -6.5449727 48.70769
#&gt; 96  35.2 -9.3601974 48.50000 -3.939802632 44.56020 -9.5787757 48.78245
#&gt; 97  40.8 -9.3393640 48.63333  1.506030702 50.13936 -9.3419811 48.85722
#&gt; 98  41.1 -9.8998904 48.70833  2.291557018 50.99989 -9.5256227 48.89771
#&gt; 99  42.8 -6.9466009 48.73750  1.009100877 49.74660 -7.0008077 48.93820
#&gt; 100 47.3 -2.7573465 48.76250  1.294846491 50.05735 -2.8175429 48.94613
#&gt;      .remainder      .weight .seasadj
#&gt; 1   -0.07222032 0.9998117442 49.94198
#&gt; 2    0.40397500 0.9941070247 50.32562
#&gt; 3    1.57171369 0.9126802010 51.40081
#&gt; 4   -0.24930092 0.9977553984 49.51754
#&gt; 5    1.03142281 0.9619042613 50.73602
#&gt; 6   -0.26447916 0.9974748211 49.40477
#&gt; 7   -4.79639351 0.3412380823 44.83751
#&gt; 8   -4.90321001 0.3197191080 44.68833
#&gt; 9   -2.67801942 0.7575428238 46.87115
#&gt; 10   0.62110779 0.9860987725 50.15253
#&gt; 11  -0.06869727 0.9998295734 49.44497
#&gt; 12  -0.29648970 0.9968240120 49.37878
#&gt; 13   3.70512025 0.5652530794 53.54198
#&gt; 14  -0.69432647 0.9826486724 49.32562
#&gt; 15   1.89777018 0.8740330207 52.10081
#&gt; 16  -0.40175826 0.9941717811 49.81754
#&gt; 17   0.50045164 0.9909689604 50.73602
#&gt; 18  -0.47892462 0.9917222061 49.60477
#&gt; 19   3.50568674 0.6050590645 53.43751
#&gt; 20  -1.45635323 0.9247811015 48.18833
#&gt; 21   0.21361388 0.9983531664 49.57115
#&gt; 22   4.80945774 0.3386139271 53.85253
#&gt; 23  -2.48363068 0.7893864291 46.24497
#&gt; 24   3.96814679 0.5117966525 52.37878
#&gt; 25  -1.25067337 0.9442359375 46.84198
#&gt; 26   0.44034827 0.9930065146 48.22562
#&gt; 27  -0.97708673 0.9657717152 46.50081
#&gt; 28  -2.40368684 0.8020068621 44.91754
#&gt; 29   5.17145139 0.2668499980 52.33602
#&gt; 30   1.45135602 0.9252972241 48.70477
#&gt; 31  -3.40475173 0.6248069424 43.93751
#&gt; 32  -4.96057839 0.3082343237 42.58833
#&gt; 33  -0.88439797 0.9719230049 46.87115
#&gt; 34  -1.19461825 0.9490683389 46.75253
#&gt; 35   0.20622919 0.9984634649 48.34497
#&gt; 36   2.98577154 0.7036777265 51.27878
#&gt; 37   2.69471628 0.7546879672 51.14198
#&gt; 38   1.08490473 0.9578945067 49.62562
#&gt; 39   1.26663654 0.9428345049 49.90081
#&gt; 40   0.04806673 0.9999163166 48.61754
#&gt; 41  -2.66876475 0.7590860969 45.83602
#&gt; 42  -4.69399240 0.3620667289 43.60477
#&gt; 43   3.24476757 0.6555667956 51.33751
#&gt; 44  -0.00124428 1.0000000000 47.88833
#&gt; 45  -0.71524905 0.9815940273 46.97115
#&gt; 46   1.21532552 0.9473121845 48.85253
#&gt; 47  -4.74303219 0.3520504143 42.84497
#&gt; 48  -0.45082633 0.9926638286 47.17878
#&gt; 49   0.97078191 0.9662141749 48.64198
#&gt; 50  -0.68625939 0.9830480211 47.02562
#&gt; 51  -2.45175731 0.7944868364 45.30081
#&gt; 52   0.40459740 0.9940901051 48.31754
#&gt; 53   1.76269045 0.8908237990 49.83602
#&gt; 54   0.26214603 0.9975164909 48.60477
#&gt; 55  -0.67441076 0.9836242049 47.93751
#&gt; 56  -2.32323163 0.8143918072 46.48833
#&gt; 57  -0.04004542 0.9999420200 48.97115
#&gt; 58   0.32703709 0.9961383276 49.45253
#&gt; 59   1.70518732 0.8976499774 50.94497
#&gt; 60   3.82485679 0.5410514810 53.17878
#&gt; 61  -0.12607135 0.9994255569 49.34198
#&gt; 62   0.49590417 0.9911290425 50.02562
#&gt; 63  -1.79057694 0.8874418517 47.80081
#&gt; 64  -1.53518313 0.9166077211 47.91754
#&gt; 65   1.12194902 0.9550103719 50.43602
#&gt; 66   1.19614862 0.9489389693 50.30477
#&gt; 67   1.73433583 0.8942072882 50.63751
#&gt; 68   0.39599547 0.9943367859 49.28833
#&gt; 69  -3.31033782 0.6430636675 45.57115
#&gt; 70   0.73855880 0.9803781333 49.65253
#&gt; 71  -4.30147685 0.4429222034 44.64497
#&gt; 72  -3.02404619 0.6966932090 45.87878
#&gt; 73  -0.31721315 0.9963661650 48.54198
#&gt; 74   4.03149740 0.4987159288 52.92562
#&gt; 75   1.47175131 0.9232248776 50.40081
#&gt; 76   2.68744640 0.7559341735 51.71754
#&gt; 77  -1.89512018 0.8743670152 47.23602
#&gt; 78  -1.43554225 0.9268852631 47.70477
#&gt; 79   0.48802331 0.9914078255 49.63751
#&gt; 80   1.20951191 0.9478052716 50.28833
#&gt; 81   1.06300760 0.9595633931 50.07115
#&gt; 82  -2.61897582 0.7673895643 46.35253
#&gt; 83  -0.78989152 0.9775667489 48.14497
#&gt; 84   0.51059666 0.9906000832 49.37878
#&gt; 85  -0.05951278 0.9998720920 48.74198
#&gt; 86  -0.67533648 0.9835797380 48.02562
#&gt; 87   3.70038320 0.5662269876 52.30081
#&gt; 88   1.34947559 0.9352460403 49.91754
#&gt; 89  -0.19969368 0.9985585123 48.33602
#&gt; 90  -2.61921491 0.7673600584 45.90477
#&gt; 91  -0.97474852 0.9659450343 47.53751
#&gt; 92   0.24419096 0.9978443356 48.78833
#&gt; 93  -1.30486248 0.9393918863 47.27115
#&gt; 94   1.31067824 0.9388599059 49.95253
#&gt; 95   0.13728668 0.9993192008 48.84497
#&gt; 96  -4.00367641 0.5044250461 44.77878
#&gt; 97   1.28476289 0.9412111825 50.14198
#&gt; 98   1.72791339 0.8949676412 50.62562
#&gt; 99   0.86260727 0.9732797776 49.80081
#&gt; 100  1.17141777 0.9510048139 50.11754
#&gt;  [ reached getOption("max.print") -- omitted 140 rows ]</div><div class='input'>
<span class='co'># Visually compare seasonal decompositions in tidy data frames.</span>

<span class='fu'>library</span>(<span class='no'>tibble</span>)
<span class='fu'>library</span>(<span class='no'>dplyr</span>)
<span class='fu'>library</span>(<span class='no'>tidyr</span>)
<span class='fu'>library</span>(<span class='no'>ggplot2</span>)

<span class='no'>decomps</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='http://www.rdocumentation.org/packages/tibble/topics/tibble'>tibble</a></span>(
    <span class='co'># Turn the ts objects into data frames.</span>
    <span class='kw'>series</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw pkg'>broom</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/broom/topics/tidy'>tidy</a></span>(<span class='no'>nottem</span>), <span class='kw pkg'>broom</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/broom/topics/tidy'>tidy</a></span>(<span class='no'>nottem</span>)),
    <span class='co'># Add the models in, one for each row.</span>
    <span class='kw'>decomp</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"decompose"</span>, <span class='st'>"stl"</span>),
    <span class='kw'>model</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='no'>d1</span>, <span class='no'>d2</span>)
) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/rowwise.html'>rowwise</a></span>() <span class='kw'>%&gt;%</span>
    <span class='co'># Pull out the fitted data using broom::augment.</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>augment</span> <span class='kw'>=</span> <span class='fu'>list</span>(<span class='kw pkg'>broom</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/broom/topics/augment'>augment</a></span>(<span class='no'>model</span>))) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span>() <span class='kw'>%&gt;%</span>
    <span class='co'># Unnest the data frames into a tidy arrangement of</span>
    <span class='co'># the series next to its seasonal decomposition, grouped</span>
    <span class='co'># by the method (stl or decompose).</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>decomp</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://www.rdocumentation.org/packages/tidyr/topics/unnest'>unnest</a></span>(<span class='no'>series</span>, <span class='no'>augment</span>) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>index</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fu'><a href='http://dplyr.tidyverse.org/reference/n.html'>n</a></span>()) <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/group_by.html'>ungroup</a></span>() <span class='kw'>%&gt;%</span>
    <span class='fu'><a href='http://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='no'>decomp</span>, <span class='no'>index</span>, <span class='no'>x</span>, <span class='kw'>adjusted</span> <span class='kw'>=</span> <span class='no'>.seasadj</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: Vectorizing 'ts' elements may not preserve their attributes</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Vectorizing 'ts' elements may not preserve their attributes</span></div><div class='input'>
<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/ggplot'>ggplot</a></span>(<span class='no'>decomps</span>) +
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>index</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>x</span>), <span class='kw'>colour</span> <span class='kw'>=</span> <span class='st'>"black"</span>) +
    <span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/geom_path'>geom_line</a></span>(<span class='fu'><a href='http://www.rdocumentation.org/packages/ggplot2/topics/aes'>aes</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='no'>index</span>, <span class='kw'>y</span> <span class='kw'>=</span> <span class='no'>adjusted</span>, <span class='kw'>colour</span> <span class='kw'>=</span> <span class='no'>decomp</span>,
                  <span class='kw'>group</span> <span class='kw'>=</span> <span class='no'>decomp</span>))</div><div class='img'><img src='decompose_tidiers-3.png' alt='' width='700' height='432.632880098887' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Aaron Jacobs

  </div>
</div>

      <footer>
      <div class="tidyverse">
  <p>broom is a part of the <strong>tidyverse</strong>, an ecosystem of packages designed with common APIs and a shared philosophy. Learn more at <a href="http://tidyverse.org">tidyverse.org</a>.</p>
</div>

<div class="author">
  <p>Developed by David Robinson.</p>
  <p>Site built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-67989-18', 'auto');
  ga('send', 'pageview');
</script>
      </footer>
   </div>

  </body>
</html>
